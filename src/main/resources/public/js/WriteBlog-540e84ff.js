import{_ as a}from"./UploadImage-675a8095.js";import{d as e,r as t,e as l,f as s,g as o,J as r,K as n,t as i,k as u,h as d,E as c,A as p,y as m,z as v,_ as g}from"./index-00623a6b.js";import{m as h}from"./marked.esm-d112d5da.js";import{b as f}from"./blog-ad198a8c.js";import{u as x}from"./users-f5a9a53f.js";/* empty css             */const I=a=>(m("data-v-dc0cd74a"),a=a(),v(),a),y={class:"blog-page"},_={class:"content",style:{"margin-top":"20px"}},b={class:"input-group"},j={key:0,class:"error-message"},k=I((()=>o("hr",{class:"separator"},null,-1))),U={class:"tag-section input-group"},w=I((()=>o("label",{for:"tags"},"选择标签:",-1))),N={class:"upload-image-container"},V=I((()=>o("div",{class:"avatar-uploader-tip"},"+ 添加封面图吸引更多读者~",-1))),z={class:"input-group"},C=I((()=>o("label",{for:"description"},"内容详情:",-1))),A=g(e({__name:"WriteBlog",setup(e){const m=x(),v=t({title:"",content:"",authorName:m.username,image:"",authorId:m.userId,tags:""}),g=a=>{v.value.image=a},I=t(""),A=()=>{v.value.title.length<5?I.value="标题至少需要 5 个字。":v.value.title.length>100?I.value="标题不能超过 100 个字。":I.value=""},B=t(""),E=()=>{v.value.tags=B.value},J=async()=>{const a=v.value.content,e=h(a);""!==e&&void 0!==e?await f({title:v.value.title,content:e,authorName:v.value.authorName,image:v.value.image,authorId:v.value.authorId,tags:v.value.tags}).then((a=>{1===a.data.code&&(c("发布成功"),p.push("/index"))})).catch((a=>{c.error(a)})):c({message:"无法解析Markdown",type:"error"})};return(e,t)=>{const c=a;return l(),s("div",y,[o("div",_,[o("div",b,[r(o("textarea",{autocomplete:"off",id:"txtTitle",placeholder:"请输入文章标题（5～100个字）",maxlength:"100","onUpdate:modelValue":t[0]||(t[0]=a=>v.value.title=a),onInput:A,class:"el-textarea__inner",style:{resize:"none","min-height":"32px",width:"100%"}},null,544),[[n,v.value.title]]),I.value?(l(),s("div",j,i(I.value),1)):u("",!0),k]),o("div",U,[w,r(o("input",{id:"tags","onUpdate:modelValue":t[1]||(t[1]=a=>B.value=a),placeholder:"输入标签，以逗号分隔",class:"input-field",onInput:E},null,544),[[n,B.value]])]),o("div",N,[d(c,{onImageChange:g,style:{"margin-right":"10px"}}),V]),o("div",z,[C,r(o("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=a=>v.value.content=a),placeholder:"请输入博客内容",class:"textarea-field"},null,512),[[n,v.value.content]])]),o("button",{onClick:J},"发布博客")])])}}}),[["__scopeId","data-v-dc0cd74a"]]);export{A as default};
