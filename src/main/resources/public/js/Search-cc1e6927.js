/* empty css             *//* empty css               *//* empty css                  *//* empty css               */import{d as a,r as e,Z as s,Q as t,b as l,e as r,f as i,g as n,J as o,K as c,S as u,F as p,B as d,k as v,O as m,E as g,$ as y,t as h,y as b,z as j,_ as k}from"./index-00623a6b.js";import{g as f}from"./mainbody-effca619.js";import"./users-f5a9a53f.js";const z=(a=>(b("data-v-d10ab821"),a=a(),j(),a))((()=>n("div",{class:"background"},null,-1))),C={class:"search-results-page"},K={class:"search-container"},_=["onKeypress","onKeydown"],w={class:"grid-container"},x=["onClick"],S={class:"title"},N={class:"project-content"},q={class:"project-info"},B={class:"publisher-name"},E={class:"categories"},F=["src"],I={key:0,class:"loading"},J=k(a({__name:"Search",setup(a){const b=e(""),j=e([]),k=e(!1),J=e(0),L=e(1),O=e(10),Q=s(),U=t().query.q;"string"==typeof U&&(b.value=U);const V=async()=>{k.value=!0;try{const a=await f({content:b.value,page:L.value,pageSize:O.value});1===a.data.code?j.value=a.data.data.records.map((a=>({title:a.title,publisherName:a.publisherName,image:a.image||"",id:a.id,categories:a.categories||[]}))):g.error(a.data.msg)}catch(a){}finally{k.value=!1}},Z=()=>{b.value.trim()?V():g.error("请输入搜索内容")},$=a=>{O.value=a,V()},A=a=>{L.value=a,V()};return l((()=>{V()})),(a,e)=>{const s=y;return r(),i(p,null,[z,n("div",C,[n("div",K,[o(n("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),onKeypress:u(Z,["enter"]),placeholder:"请输入搜索内容...",class:"search-input",onKeydown:u(Z,["enter"])},null,40,_),[[c,b.value]]),n("button",{onClick:Z,class:"search-button"},"搜索")]),n("div",w,[(r(!0),i(p,null,d(j.value,(a=>(r(),i("div",{key:a.id,class:"grid-item",onClick:e=>{return s=a.id,void Q.push({name:"join",params:{id:s}});var s}},[n("h3",S,h(a.title),1),n("div",N,[n("div",q,[n("p",B,h(a.publisherName),1),n("div",E,[(r(!0),i(p,null,d(a.categories.slice(0,2),(a=>(r(),i("span",{key:a.id,class:"categories-label"},h(a.name),1)))),128))])]),n("img",{src:a.image,alt:"项目缩略图",class:"thumbnail"},null,8,F)])],8,x)))),128)),k.value?(r(),i("div",I,"加载中...")):v("",!0)]),J.value>0?(r(),m(s,{key:0,class:"pageList",onSizeChange:$,onCurrentChange:A,"current-page":L.value,"page-size":O.value,total:J.value,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])):v("",!0)])],64)}}}),[["__scopeId","data-v-d10ab821"]]);export{J as default};
