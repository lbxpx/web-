import{_ as a,G as s,e as t,f as e,h as l,w as o,j as n,d as i,r,b as c,o as d,g as u,F as g,B as p,k as v,E as m,t as h,A as y}from"./index-00623a6b.js";import{g as f}from"./blog-ad198a8c.js";import"./users-f5a9a53f.js";const w={class:"navbar"};const _=a({},[["render",function(a,i){const r=s("router-link");return t(),e("div",w,[l(r,{to:"/index",class:"navbar-item"},{default:o((()=>[n(" 回到首页 ")])),_:1})])}],["__scopeId","data-v-81781d76"]]),k={class:"project-page"},b={class:"content",style:{"margin-top":"20px"}},j=["onClick"],x={class:"post-title"},E={class:"post-summary"},I={class:"post-date"},B={class:"post-tags"},C=["src"],H={key:0,ref:"loadingIndicator",class:"loading"},L=a(i({__name:"Blog",setup(a){const s=r([]),o=r(!1),n=r(!1),i=r(1),w=r(10),L=async()=>{o.value=!0;try{await f({page:i.value,pageSize:w.value}).then((a=>{if(1===a.data.code){const t=a.data.data.records.map((a=>({title:a.title,author:a.author,image:a.image||"",id:a.id,category:a.categories||[],date:a.date,tags:a.tags?a.tags.split(",").map((a=>a.trim())):[]})));t.length>0?(s.value=s.value.concat(t),i.value++):n.value=!0}else m.error(a.data.msg)}))}catch(a){}finally{o.value=!1}},q=()=>{const a=window.innerHeight,{scrollTop:s,scrollHeight:t}=document.documentElement;a+s>=t-100&&!o.value&&!n.value&&L()};return c((()=>{window.addEventListener("scroll",q),L()})),d((()=>{window.removeEventListener("scroll",q)})),(a,n)=>{const i=_;return t(),e("div",k,[l(i),u("div",b,[(t(!0),e(g,null,p(s.value,(a=>(t(),e("div",{class:"post",key:a.id},[u("div",{class:"post-content",onClick:s=>{return t=a.id,void y.push({name:"blogdetail",query:{id:t}});var t}},[u("h2",x,h(a.title),1),u("p",E,h(a.author),1),u("span",I,h(a.date),1),u("div",B,[(t(!0),e(g,null,p(a.tags,((a,s)=>(t(),e("span",{key:s,class:"tag"},h(a),1)))),128))])],8,j),u("img",{src:a.image,alt:"文章图片",class:"post-image"},null,8,C)])))),128)),o.value?(t(),e("div",H,"加载中...",512)):v("",!0)])])}}}),[["__scopeId","data-v-9e91ba13"]]);export{L as default};
