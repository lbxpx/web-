/* empty css             *//* empty css               *//* empty css              */import{d as a,r as e,c as l,a as s,o,b as t,e as r,f as d,g as i,n,h as u,w as c,u as m,t as p,i as f,j as v,k as g,l as w,E as b,m as y,p as h,q as x,s as V,v as _,x as C,y as k,z as U,A as E,_ as j}from"./index-00623a6b.js";import{u as I}from"./utils-deca23f5.js";import{u as O,g as S,c as A,r as F,a as P,b as T,t as R}from"./users-f5a9a53f.js";function $(a){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(a)}const L=a=>(k("data-v-98aefa13"),a=a(),U(),a),q={id:"img-one",class:"img"},z={class:"box"},H=L((()=>i("p",null,"WELCOME",-1))),N=L((()=>i("p",null,"JOIN US!",-1))),Y={class:"img-box"},G=["src"],W={key:0,class:"register-form"},Z=L((()=>i("div",{class:"title-box"},[i("span",null,"注册")],-1))),B={key:0},K={key:1},M={class:"btn-box"},D={key:1,class:"register-form"},J=L((()=>i("div",{class:"title-box"},[i("span",null,"密码重置")],-1))),X={key:0},Q={key:1},aa={class:"btn-box"},ea={class:"login-form"},la=L((()=>i("div",{class:"title-box"},[i("span",null,"登录")],-1))),sa=["src"],oa={class:"btn-box"},ta={key:0},ra={key:1},da={class:"pageChange"},ia=w('<section class="content-one" data-v-98aefa13><div class="text-box" data-v-98aefa13><div class="cnt" data-v-98aefa13><h2 data-v-98aefa13>THE TIME</h2><p data-v-98aefa13> Time would heal almost all wounds . If your wounds have not been healed up , please wait for a short while. Life isn&#39;t about waiting for the storm to pass . it&#39;s about learning to dance in the rain. </p><p data-v-98aefa13><a href="#" class="btn" data-v-98aefa13>TAKE <strong data-v-98aefa13>CARE OF</strong><em data-v-98aefa13>YOURSEFL</em></a></p></div></div></section><section class="content-two" data-v-98aefa13><div class="text-box" data-v-98aefa13><div class="cnt" data-v-98aefa13><h2 data-v-98aefa13>LIVING</h2><p data-v-98aefa13> Some of us get dipped in flat, some in satin, some in gloss. But every once in a while you find someone who&quot;s iridescent, and when you do, nothing will ever compare. We accept both the good and the bad, andwithout uttering a sound, we continue living. </p><p data-v-98aefa13><a href="#" class="btn" data-v-98aefa13>BEST <strong data-v-98aefa13>WISHS</strong><em data-v-98aefa13>FOR YOU</em></a></p></div></div></section><section class="content-three" data-v-98aefa13><div class="text-box" data-v-98aefa13><div class="cnt" data-v-98aefa13><h2 data-v-98aefa13>HAPPY ENDING</h2><p data-v-98aefa13> Nobody can go back and start a new beginning , but anyone can start today and make a new ending. The minute you think of giving up , think of the reason why you held on so long . </p><p data-v-98aefa13><a href="#" class="btn" data-v-98aefa13>TAKE <strong data-v-98aefa13>CARE OF</strong><em data-v-98aefa13>YOURSEFL</em></a></p></div></div></section><section id="img-two" class="img" data-v-98aefa13><h1 data-v-98aefa13>THOUGHTS</h1></section><section id="footer" data-v-98aefa13>FOOTER</section>',5),na=j(a({__name:"Login",setup(a){const w=O();let k=e(!1);const U=e(0),j=e("#6d9f7a"),L=e("girl1.jpg"),na=e(!0),ua=l((()=>I.getAssetsFile(L.value))),ca=e(1),ma=()=>{0===U.value?(U.value=100,j.value="#c9e0ed",L.value="girl2.jpg"):(U.value=0,j.value="#6d9f7a",L.value="girl1.jpg"),na.value=!na.value},pa=e(""),fa=e(""),va=async()=>{await S().then((a=>{if(1===a.data.code){const e=a.data.data;pa.value=e.imgCode,fa.value=e.identity}else b("刷新失败")})).catch((a=>{b.error("请求失败"+a.message)}))},ga=s({username:"admin",password:"123456",verifyCode:""}),wa=e(null),ba=s({username:"",password:"",confirmPassword:"",verifyCode:"",email:""}),ya=e(),ha=s({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:15,message:"用户名长度应在2~5个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不应小于6个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(a,e,l)=>{e!==ba.password?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:(a,e,l)=>{e?$(e)?l():l(new Error(`请输入有效的 ${a.field} 地址`)):l(new Error(`请填写 ${a.field} 字段`))},trigger:"blur"}]}),xa=async()=>{try{if(!(await ya.value.validate()))return;const a=await A({email:ba.email,code:ba.verifyCode});if(1!==a.data.code)return void b(a.data.msg);const e=await F({username:ba.username,password:ba.password,email:ba.email});1===e.data.code?(b("注册成功！"),ma()):b(`注册请求失败：${e.data.msg}`)}catch(a){b(`请求失败：${a.message}`)}},Va=async()=>{try{if(!(await wa.value.validate()))return;const a=await R({identity:fa.value,verifycode:ga.verifyCode});if(1!==a.data.code)return void b(a.data.msg);k.value=!0;const e=await w.Login({username:ga.username,password:ga.password});1===e.code?E.push("/index"):(k.value=!1,b.error("登录失败，账号密码错误：",e.msg))}catch(a){k.value=!1,b.error("请求错误："+a.message)}},_a=e(""),Ca=e(60),ka=e(!1),Ua=e(null),Ea=async a=>{if(!ka.value)if($(a))try{const e=await P({email:a});1===e.data.code?(b("验证码已成功发送，请注意查收！"),_a.value=e.data,ka.value=!0,ja()):b.error("验证码发送失败！")}catch(e){b.error("获取验证码失败："+e.message)}else b.error("邮箱错误!")},ja=()=>{Ca.value=60,Ua.value=setInterval((()=>{Ca.value>0?Ca.value--:(clearInterval(Ua.value),Ua.value=null,ka.value=!1)}),1e3)},Ia=async()=>{try{if(!(await ya.value.validate()))return;const a=await A({email:ba.email,code:ba.verifyCode});if(1!==a.data.code)return void b(a.data.msg);const e=await T({username:ba.username,password:ba.password,email:ba.email});1===e.data.code?b("修改密码成功！"):b(`修改密码请求失败：${e.data.msg}`)}catch(a){b(`请求失败：${a.message}`)}};return o((()=>{Ua.value&&(clearInterval(Ua.value),Ua.value=null)})),t((async()=>{await va()})),(a,e)=>{const l=y,s=h,o=x,t=V;return r(),d("div",null,[i("section",q,[i("div",z,[i("div",{class:"pre-box",style:n({transform:`translateX(${U.value}%)`,backgroundColor:j.value})},[H,N,i("div",Y,[i("img",{src:ua.value,alt:""},null,8,G)])],4),1==ca.value?(r(),d("div",W,[Z,u(t,{ref_key:"registerFormRef",ref:ya,model:ba,rules:ha,"status-icon":"",onSubmit:e[6]||(e[6]=f((()=>{}),["prevent"]))},{default:c((()=>[u(s,{label:"",prop:"username"},{default:c((()=>[u(l,{type:"text",placeholder:"用户名",clearable:"","suffix-icon":m(_),modelValue:ba.username,"onUpdate:modelValue":e[0]||(e[0]=a=>ba.username=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"password"},{default:c((()=>[u(l,{type:"password",placeholder:"密码",clearable:"","suffix-icon":m(C),"show-password":"",modelValue:ba.password,"onUpdate:modelValue":e[1]||(e[1]=a=>ba.password=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"confirmPassword"},{default:c((()=>[u(l,{type:"password",placeholder:"确认密码",clearable:"","suffix-icon":m(C),"show-password":"",modelValue:ba.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>ba.confirmPassword=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"email"},{default:c((()=>[u(l,{placeholder:"请输入邮箱",maxlength:"20",clearable:"",modelValue:ba.email,"onUpdate:modelValue":e[3]||(e[3]=a=>ba.email=a)},null,8,["modelValue"])])),_:1}),u(s,{label:"",prop:"verifyCode"},{default:c((()=>[u(l,{style:{width:"129px"},placeholder:"请输入验证码",maxlength:"6",clearable:"",modelValue:ba.verifyCode,"onUpdate:modelValue":e[4]||(e[4]=a=>ba.verifyCode=a)},null,8,["modelValue"]),u(o,{size:"small",type:"primary",onClick:e[5]||(e[5]=a=>Ea(ba.email)),disabled:ka.value},{default:c((()=>[ka.value?(r(),d("span",B,p(Ca.value)+"秒后可重发",1)):(r(),d("span",K,"获取验证码"))])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model","rules"]),i("div",M,[u(o,{class:"btn",type:"primary",onClick:xa},{default:c((()=>[v("注册")])),_:1}),i("p",{onClick:e[7]||(e[7]=a=>ma())},"已有账号?去登录")])])):g("",!0),2==ca.value?(r(),d("div",D,[J,u(t,{ref_key:"registerFormRef",ref:ya,model:ba,rules:ha,"status-icon":"",onSubmit:e[14]||(e[14]=f((()=>{}),["prevent"]))},{default:c((()=>[u(s,{label:"",prop:"username"},{default:c((()=>[u(l,{type:"text",placeholder:"用户名",clearable:"","suffix-icon":m(_),modelValue:ba.username,"onUpdate:modelValue":e[8]||(e[8]=a=>ba.username=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"password"},{default:c((()=>[u(l,{type:"password",placeholder:"请输入新密码",clearable:"","suffix-icon":m(C),"show-password":"",modelValue:ba.password,"onUpdate:modelValue":e[9]||(e[9]=a=>ba.password=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"confirmPassword"},{default:c((()=>[u(l,{type:"password",placeholder:"请确认新密码",clearable:"","suffix-icon":m(C),"show-password":"",modelValue:ba.confirmPassword,"onUpdate:modelValue":e[10]||(e[10]=a=>ba.confirmPassword=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"email"},{default:c((()=>[u(l,{placeholder:"请输入邮箱",maxlength:"20",clearable:"",modelValue:ba.email,"onUpdate:modelValue":e[11]||(e[11]=a=>ba.email=a)},null,8,["modelValue"])])),_:1}),u(s,{label:"",prop:"verifyCode"},{default:c((()=>[u(l,{style:{width:"129px"},placeholder:"请输入验证码",maxlength:"6",clearable:"",modelValue:ba.verifyCode,"onUpdate:modelValue":e[12]||(e[12]=a=>ba.verifyCode=a)},null,8,["modelValue"]),u(o,{size:"small",type:"primary",onClick:e[13]||(e[13]=a=>Ea(ba.email)),disabled:ka.value},{default:c((()=>[ka.value?(r(),d("span",X,p(Ca.value)+"秒后可重发",1)):(r(),d("span",Q,"获取验证码"))])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model","rules"]),i("div",aa,[u(o,{class:"btn",type:"primary",onClick:Ia},{default:c((()=>[v("修改密码")])),_:1}),i("p",{onClick:e[15]||(e[15]=a=>ma())},"记得密码?去登录")])])):g("",!0),i("div",ea,[la,u(t,{ref_key:"loginFormRef",ref:wa,model:ga,rules:ha,"status-icon":"",onSubmit:e[20]||(e[20]=f((()=>{}),["prevent"]))},{default:c((()=>[u(s,{label:"",prop:"username"},{default:c((()=>[u(l,{type:"text",placeholder:"用户名",clearable:"","suffix-icon":m(_),modelValue:ga.username,"onUpdate:modelValue":e[16]||(e[16]=a=>ga.username=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"password"},{default:c((()=>[u(l,{type:"password",placeholder:"密码",clearable:"","suffix-icon":m(C),"show-password":"",modelValue:ga.password,"onUpdate:modelValue":e[17]||(e[17]=a=>ga.password=a)},null,8,["suffix-icon","modelValue"])])),_:1}),u(s,{label:"",prop:"verifyCode"},{default:c((()=>[u(l,{style:{width:"150px"},placeholder:"请输入验证码",maxlength:"4",clearable:"",modelValue:ga.verifyCode,"onUpdate:modelValue":e[18]||(e[18]=a=>ga.verifyCode=a)},null,8,["modelValue"]),i("img",{onClick:e[19]||(e[19]=a=>va()),style:{"margin-left":"auto"},referrerpolicy:"no-referrer",src:pa.value},null,8,sa)])),_:1})])),_:1},8,["model","rules"]),i("div",oa,[u(o,{class:"btn",type:"primary",onClick:f(Va,["prevent"])},{default:c((()=>[m(k)?(r(),d("span",ra,"登录中...")):(r(),d("span",ta,"登录"))])),_:1},8,["onClick"]),i("div",da,[i("p",{onClick:e[21]||(e[21]=a=>(ca.value=1,ma()))},"没有账号?去注册"),i("p",{onClick:e[22]||(e[22]=a=>(ca.value=2,ma()))},"忘记密码")])])])])]),ia])}}}),[["__scopeId","data-v-98aefa13"]]);export{na as default};
