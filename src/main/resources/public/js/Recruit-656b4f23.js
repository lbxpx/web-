import{_ as a}from"./UploadImage-675a8095.js";/* empty css             *//* empty css               *//* empty css                  *//* empty css               */import{_ as e}from"./CommonHeader-3c26eef5.js";import{d as s,r as t,b as l,e as r,f as i,h as o,g as d,J as u,K as p,w as n,F as c,B as m,E as v,A as g,N as b,O as h,y as f,z as j,P as y,_ as I}from"./index-00623a6b.js";import{m as x}from"./marked.esm-d112d5da.js";import{s as _,u as k}from"./users-f5a9a53f.js";/* empty css               */import"./kon-c071413b.js";const w=a=>(f("data-v-aba110ad"),a=a(),j(),a),N={class:"project-page"},V={class:"content",style:{"margin-top":"20px"}},U=w((()=>d("h1",null,"发布招募",-1))),C={class:"input-group"},F=w((()=>d("label",{for:"title"},"标题:",-1))),q={class:"category-section input-group"},z=w((()=>d("label",{for:"category"},"选择分类:",-1))),A={class:"upload-image-container"},B=w((()=>d("div",{class:"avatar-uploader-tip"}," + 添加优质首图更吸引人~ ",-1))),E={class:"input-group"},H=w((()=>d("label",{for:"description"},"内容详情:",-1))),J=I(s({__name:"Recruit",setup(s){const f=k(),j=f.userId,I=f.username,w=t({title:"",description:"",publisherName:"",image:"",link:"",userId:j}),J=a=>{w.value.image=a};w.value.publisherName=I,w.value.userId=j;const K=t([]),M=t([]),O=async()=>{try{const a=await _({url:"/api/categories",method:"get"});M.value=a.data.data}catch(a){}},P=async()=>{const a=w.value.description,e=x(a);var s;if(""!==e&&void 0!==e)try{const a={title:w.value.title,description:e,publisherName:w.value.publisherName,image:w.value.image,userId:w.value.userId,categoryIds:K.value};await(s=a,_({url:"/api/projects",method:"post",data:{...s}})).then((a=>{1===a.data.code&&(alert("招募成功发布！"),g.push("/index"))}))}catch(t){alert("发布失败，请重试。")}else v({message:"无法解析Markdown",type:"error"})};return l((()=>{O()})),(s,t)=>{const l=e,v=y,g=b,f=a;return r(),i("div",N,[o(l),d("div",V,[U,d("div",C,[F,u(d("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=a=>w.value.title=a),placeholder:"请输入项目标题",class:"input-field"},null,512),[[p,w.value.title]])]),d("div",q,[z,o(g,{id:"category",modelValue:K.value,"onUpdate:modelValue":t[1]||(t[1]=a=>K.value=a),class:"select-field",multiple:"",filterable:"",clearable:""},{default:n((()=>[(r(!0),i(c,null,m(M.value,(a=>(r(),h(v,{key:a.id,value:a.id,label:a.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])]),d("div",A,[o(f,{onImageChange:J,style:{"margin-right":"10px"}}),B]),d("div",E,[H,u(d("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=a=>w.value.description=a),placeholder:"请输入内容详情、活动官方链接等信息",class:"textarea-despField"},null,512),[[p,w.value.description]])]),d("button",{onClick:P},"发布招募")])])}}}),[["__scopeId","data-v-aba110ad"]]);export{J as default};
