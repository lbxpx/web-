import{_ as a}from"./CommonHeader-3c26eef5.js";import{s as e,u as s}from"./users-f5a9a53f.js";import{d as t,r as l,b as r,e as o,f as n,h as c,g as i,F as m,B as u,t as d,k as p,E as v,M as j,H as y,y as h,z as g,_ as k}from"./index-00623a6b.js";/* empty css             *//* empty css               *//* empty css               *//* empty css                  */import"./kon-c071413b.js";const b=a=>(h("data-v-a5ce3d7f"),a=a(),g(),a),f={class:"project-page"},_={class:"content",style:{"margin-top":"20px"}},w={class:"sidebar"},x=b((()=>i("h2",null,"我的项目",-1))),C=["onClick"],I={class:"main-content"},$=b((()=>i("h2",null,"项目详情及我的任务",-1))),B={key:0,class:"project-details"},T={key:1},H=[b((()=>i("p",null,"请选择左侧项目以查看详细信息",-1)))],M={class:"team-info"},q=b((()=>i("h2",null,"团队信息",-1))),z=["src"],E={class:"member-info"},F={class:"member-info"},P={class:"member-info"},A={class:"buttons"},D=k(t({__name:"MyProject",setup(t){const h=s().userId,g=l(),k=l([]),b=l([]),D=async a=>{var s;g.value=a,await(s=a.projectId,e({url:`/api/myprojects/team/${s}`,method:"get"})).then((a=>{1===a.data.code?k.value=a.data.data:v.error(a.data.msg)})).catch((a=>{v.error(a.message)}))},G=async()=>{await(a=>e({url:`/api/myprojects/${a}`,method:"get"}))(h).then((a=>{1===a.data.code?b.value=a.data.data:v(a.data.msg)})).catch((a=>{v.error(a.message)}))},J=async()=>{j.confirm("确认退出吗, 是否继续?","确认退出",{confirmButtonText:"退出",cancelButtonText:"取消",type:"warning"}).then((async()=>{await((a,s)=>e({url:`/api/myprojects/${a}/${s}`,method:"delete"}))(h,g.value.projectId).then((a=>{1===a.data.code?(v("退出成功"),G()):v("退出失败")}))})).catch((a=>{v.error(a.message)}))},K=async()=>{var a;await(a=g.value.projectId,e({url:`/api/projects/${a}`,method:"delete"})).then((a=>{1===a.data.code&&(v("恭喜你完成项目！"),G())})).catch((a=>{v(a)}))};return r((()=>{G()})),(e,s)=>{const t=a;return o(),n("div",f,[c(t),i("div",_,[i("div",w,[x,i("ul",null,[(o(!0),n(m,null,u(b.value,((a,e)=>(o(),n("li",{key:e,class:y({active:g.value===a}),onClick:e=>D(a)},d(a.title),11,C)))),128))])]),i("div",I,[$,g.value?(o(),n("div",B,[i("h3",null,d(g.value.title),1),i("p",null,d(g.value.assign),1)])):(o(),n("div",T,H))])]),i("div",M,[q,i("ul",null,[(o(!0),n(m,null,u(k.value,(a=>(o(),n("li",{key:a.name},[i("img",{src:a.image,alt:"Team member image",class:"team-member-image"},null,8,z),i("span",E,d(a.name),1),i("span",F,"角色: "+d(a.role),1),i("span",P,"任务: "+d(a.assign),1)])))),128))]),i("div",A,[g.value?(o(),n(m,{key:0},["队长"===g.value.role?(o(),n("button",{key:0,onClick:K},"结束项目")):"成员"===g.value.role?(o(),n("button",{key:1,onClick:J},"退出团队")):p("",!0)],64)):p("",!0)])])])}}}),[["__scopeId","data-v-a5ce3d7f"]]);export{D as default};
