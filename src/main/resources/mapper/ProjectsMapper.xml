<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xpxp.mapper.ProjectsMapper">
    <select id="getProjectsList" resultType="com.xpxp.pojo.VO.ProjectsVO">
        SELECT DISTINCT p.*
        FROM projects p
        left join pro_categories pc on p.id = pc.project_id
        left join categories c on pc.category_id = c.id
        <where>
            <if test="condition.content != null"> and ((title like concat('%',#{condition.content},'%'))
                or (c.name like concat('%',#{condition.content},'%'))
                or  (p.publisher_name like concat('%',#{condition.content},'%')))
            </if>
            <if test="condition.title != null">and title like concat('%',#{condition.content})</if>
        </where>
        order by created_at desc
    </select>
</mapper>